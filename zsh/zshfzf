source <(fzf --zsh)

fzf_widget() {
    local selected
    selected=$(fd | fzf --multi --scheme=path\
        --preview 'preview {} $FZF_PREVIEW_LINES' --preview-label='File Preview' |\
        sed 's/^\(.*\)$/"\1"/' | tr '\n' ' ')

    if [[ -n $selected ]]; then
        BUFFER="$BUFFER$selected"
        CURSOR=$#BUFFER
    fi
    zle redisplay
}
zle -N fzf_widget

bindkey '^f' fzf_widget
